<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>A Simple BarChart</title>
<link rel="stylesheet" href="http://a.tbcdn.cn/p/global/1.0/global-min.css" />
<style type="text/css">
#demo1{
    width:750px;
    height:300px;
    margin:0px auto;
}
</style>
</head>
<body>
<div id="demo1">

</div>
<div id="console"></div>
<script src="//g.tbcdn.cn/kissy/k/1.4.2/seed-min.js"></script>
<script type="text/javascript">
    KISSY.use('event,gallery/kcharts/1.3/barchart/index',function(S,Evt,BarChart){
        
        // BarChart.prototype.delegateClick = function(e) {
        //     var self = this,
        //         ctn = self.getInnerContainer();
        //         for(var i in self._evtEls._bars){
        //             for(var j in self._evtEls._bars[i]){
        //                  var rect = self._evtEls._bars[i][j];
        //                   if (self.isInSide(e.offsetX + ctn.x, e.offsetY + ctn.y, rect['x'], rect['y'], rect['width'], rect['height'])) {
        //                 self.barClick(i, j);
        //                 return;
        //             }
        //             }
        //         }
        // }

        var barChart = new BarChart({
            renderTo:"#demo1",
            title:{
                content:"Monthly Average Rainfall",
                css:{
                }
            },
            anim:{},
            subTitle:{
                content:"Source: WorldClimate.com",
                css:{

                }
            },
            xLabels:{
            },
            yLabels:{
            },
             xAxis: {
                    isShow:false,
                    text:[
                    'Jan',
                    'Feb',
                    'Mar',
                    'Apr',
                    'May',
                    'Jun',
                    'Jul',
                    'Aug',
                    'Sep',
                    'Oct',
                    'Nov',
                    'Dec']
            },
            yAxis:{
                 isShow:false,
                min:0
            },
            bars:{
                barsRatio:0.8,
                barRatio:1,
                attr:{
                    template:function(e){
                    console.log(e)
                },
                    r:"2",
                    fill:"0-{COLOR}-#fff:#fff-{COLOR}"
                }

            },
            series:[{
                text: 'Tokyo',
                data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    
            }
            , {
                text: 'New York',
                data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]
    
            }, {
                text: 'London',
                data: [48.9, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2]
    
            }
            ],
            legend:{
                isShow:true,y:-10
            },
            tip:{
                template:"{{text}} {{y}} mm",
                alignX:"right",
                css:{"border-color":"{COLOR}"},
                offset:{
                    y:-10
                }
            }
        });

            // Evt.on(barChart._evtEls.paper.$paper, "click", function(e) {
            //     //fix firefox offset bug
            //     e = barChart.getOffset(e);
            //     //mousemove代理
            //     barChart.delegateClick(e);
            // });

            barChart.on("barClick",function(e){
                console.log(e)
                KISSY.all("#console").html("当前您选中了第"+e.barGroup+"组，第"+e.barIndex+"根柱</br> e.dataInfo = "+JSON.stringify(e.dataInfo));
            })
    });

</script>
</body>
</html>